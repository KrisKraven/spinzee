<!DOCTYPE html>
<html>
<head>
  <style>
    body{margin:0;background:linear-gradient(#667eea,#764ba2);color:white;font-family:Arial;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;overflow:hidden}
    input{padding:12px;margin:10px 0;width:280px;border-radius:12px;border:none;font-size:18px}
    .wheel-wrapper{
      width:340px;
      height:340px;
      margin:20px auto;
      position:relative;
      flex-shrink:0;
    }
    #wheel{
      width:100%;
      height:100%;
      border-radius:50%;
      background:conic-gradient(#ff6b6b,#feca57,#48dbfb,#ff9ff3,#54a0ff,#5f27cd,#c8d6e5,#1dd1a1);
      box-shadow:0 0 70px rgba(0,0,0,0.9);
    }
    #arrow{
      position:absolute;
      top:-60px;
      left:50%;
      transform:translateX(-50%);
      font-size:130px;
      z-index:10;
    }
    button{
      margin-top:20px;padding:22px 80px;font-size:36px;background:white;color:#667eea;border:none;border-radius:50px;cursor:pointer;box-shadow:0 20px 40px rgba(0,0,0,0.4)
    }
    button:disabled{background:#bbb;cursor:not-allowed}
    #r{margin-top:50px;font-size:48px;font-weight:bold;text-shadow:0 0 20px #000}
  </style>
</head>
<body>
  <h2>Enter to Spin!</h2>
  <input type="text" id="name" placeholder="Your Name" required>
  <input type="email" id="email" placeholder="Your Email" required>

  <div class="wheel-wrapper">
    <div id="arrow">↓</div>
    <div id="wheel"></div>
  </div>

  <button id="b">SPIN NOW!</button>
  <div id="r"></div>

  <script>
    const prizes=["Amazon Gift Card!","Target Gift Card!","Starbucks Gift Card!","Try again!"];
    function getWeek(){const d=new Date();d.setHours(0,0,0,0);d.setDate(d.getDate()+4-(d.getDay()||7));const weekStart=new Date(d.getFullYear(),0,1);const weekNum=Math.ceil(((d-weekStart)/86400000+1)/7);return d.getFullYear()+"-W"+weekNum;}
    const thisWeek=getWeek();const spun=localStorage.getItem("spunWeek");

    if(spun===thisWeek){
      document.getElementById("b").disabled=true;document.getElementById("b").textContent="Already spun this week!";
      document.getElementById("r").innerHTML=localStorage.getItem("prize").includes("Try again")?localStorage.getItem("prize"):"JACKPOT — "+localStorage.getItem("prize");
    }

    document.getElementById("b").onclick=function(){
      const name=document.getElementById("name").value.trim();
      const email=document.getElementById("email").value.trim();
      if(!name||!email){alert("Please enter name and email");return;}
      if(spun===thisWeek)return;
      this.disabled=true;this.textContent="Spinning...";
      const w=document.getElementById("wheel");
      w.style.transition="all 5s cubic-bezier(0.17,0.67,0.12,1)";
      w.style.transform="rotate("+(3600+Math.random()*360+3240)+"deg)";
      setTimeout(()=>{
        const win=prizes[Math.floor(Math.random()*prizes.length)];
        document.getElementById("r").innerHTML=win.includes("Try again")?win:"JACKPOT — "+win;
        localStorage.setItem("spunWeek",thisWeek);localStorage.setItem("prize",win);
        fetch("https://hook.us2.make.com/las2vf451hpgxb9y7vaaotqfatqjjys0",{
          method:"POST",
          body:JSON.stringify({name:name,email:email,prize:win,date:new Date().toLocaleString()})
        });
      },5300);
    };
  </script>
</body>
</html>
